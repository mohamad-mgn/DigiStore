{% extends "base.html" %}
{% load static %}

{% block title %}{{ view.title|default:'ایجاد محصول' }} — دیجی‌استور{% endblock %}

{% block content %}

<div class="row">

    <!-- سایدبار حرفه‌ای (مثل صفحه محصولات) -->
    <div class="col-lg-3 mb-4">
        <div class="card shadow-sm border-0" style="border-radius:14px;">
            <div class="card-body">

                <h5 class="fw-bold mb-3 text-primary">مدیریت محصول</h5>

                <div class="list-group">

                    <a href="{% url 'product:list' %}"
                       class="list-group-item list-group-item-action">
                        <i class="bi bi-box-seam ms-1"></i> همه محصولات
                    </a>

                    <a href="{% url 'product:create' %}"
                       class="list-group-item list-group-item-action active">
                        <i class="bi bi-plus-circle ms-1"></i> ایجاد محصول جدید
                    </a>

                    {% if request.user.is_seller %}
                    <a href="{% url 'store:dashboard' %}"
                       class="list-group-item list-group-item-action">
                        <i class="bi bi-shop ms-1"></i> داشبورد فروشنده
                    </a>
                    {% endif %}

                </div>

            </div>
        </div>
    </div>

    <!-- بخش اصلی (فرم ایجاد محصول) -->
    <div class="col-lg-9">

        <!-- عنوان بخش -->
        <div class="mb-4 p-3 rounded"
             style="background: var(--navy); color:white; border-radius:14px; box-shadow: var(--shadow-1);">
            <h4 class="fw-bold mb-0">{{ view.title|default:"ایجاد / ویرایش محصول" }}</h4>
        </div>

        <!-- کارت فرم -->
        <div class="card shadow-sm border-0" style="border-radius:14px;">
            <div class="card-body">

                <form method="post" enctype="multipart/form-data" class="mt-2">
                    {% csrf_token %}

                    <!-- رندر فرم -->
                    <div class="row">
                        {% for field in form %}
                        <div class="col-md-12 mb-3">
                            <label class="fw-bold mb-1">{{ field.label }}</label>
                            {{ field }}
                            {% if field.errors %}
                                <div class="text-danger small">{{ field.errors }}</div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>

                    <!-- دکمه‌ها -->
                    <div class="d-flex gap-2 mt-3">
                        <button class="btn btn-success px-4">
                            <i class="bi bi-check-circle ms-1"></i> ذخیره محصول
                        </button>

                        <a class="btn btn-secondary px-4"
                           href="{% url 'product:list' %}">
                            <i class="bi bi-x-circle ms-1"></i> انصراف
                        </a>
                    </div>

                </form>

            </div>
        </div>

    </div>

</div>

{% endblock %}